<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/modules/admin.css">
</head>

<div class="admin-layout">
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <span>ğŸ› ï¸</span>
                <h1>AIç®¡ç†åŠ©æ‰‹</h1>
            </div>
            <!-- æ·»åŠ ç™»å‡ºæŒ‰é’® -->
            <button id="logout-btn" class="logout-btn">
                <span class="icon">ğŸšª</span>
                <span class="text">é€€å‡ºç™»å½•</span>
            </button>
        </div>
        <ul class="menu-list">
            <!-- å·¥ä½œå°èœå•é¡¹æ·»åŠ ç¦ç”¨æ ·å¼ -->
            <li class="menu-item disabled">
                <span class="icon">ğŸ </span>
                <span class="text">å·¥ä½œå°</span>
            </li>
            
            <!-- å­èœå•é¡¹ä¿æŒåŸæœ‰ç»“æ„ -->
            <ul class="submenu">
                <!-- æ¯ä¸ªèœå•é¡¹å¿…é¡»åŒ…å«data-typeå±æ€§ -->
                <li class="menu-item" data-type="users"data-path="/admin/users">
                    <span class="icon">ğŸ‘¥</span>
                    <span class="text">ç”¨æˆ·ç®¡ç†</span>
                </li>
                <li class="menu-item" data-type="knowledge">
                    <span class="icon">ğŸ“š</span>
                    <span class="text">çŸ¥è¯†åº“</span>
                </li>
                <li class="menu-item" data-type="settings">
                    <span class="icon">âš™ï¸</span>
                    <span class="text">ç³»ç»Ÿè®¾ç½®</span>
                </li>
            </ul>
            
            <script>
            document.addEventListener('DOMContentLoaded', () => {
                // ä»…ç»‘å®šå­èœå•ç‚¹å‡»äº‹ä»¶
                document.querySelectorAll('.submenu .menu-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const type = this.dataset.type;
                        // æ¸…é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
                        document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                        // è®¾ç½®å½“å‰æ¿€æ´»é¡¹
                        this.classList.add('active');
                        console.log('[53] å·¥å…·æ ç‚¹å‡»');
                        loadContent(type);
                    });
                });
            });
            </script>
        </ul>
    </div>
    <div class="content-container">
        <div id="dynamic-content">
            <!-- é»˜è®¤æ˜¾ç¤ºå·¥ä½œå°å†…å®¹ -->
            <div class="welcome-panel">
                <h3>æ¬¢è¿ä½¿ç”¨AIç®¡ç†åŠ©æ‰‹</h3>
                <p>è¯·ä»å·¦ä¾§èœå•é€‰æ‹©åŠŸèƒ½æ¨¡å—</p>
            </div>
        </div>
    </div>
</div>

<script>
// ä¿®å¤å‡½æ•°é—­åˆé—®é¢˜
// ä¿®æ”¹å‰ç«¯åŠ è½½é€»è¾‘
async function loadContent(type) {
    // æ˜ å°„typeåˆ°å®é™…è·¯ç”±
    const routeMap = {
        users: '/admin/users',
        knowledge: '/admin/knowledge',
        settings: '/admin/settings',
        create_user: '/admin/users/create'
    };
    
    // æ·»åŠ è·¯å¾„æœ‰æ•ˆæ€§æ£€æŸ¥
    if (!routeMap[type]) {
        console.error('æ— æ•ˆçš„è·¯ç”±ç±»å‹:', type);
        return;
    }
    try {
        const response = await fetch(routeMap[type]);
        document.getElementById('dynamic-content').innerHTML = await response.text();
    } catch (error) {
        console.error('åŠ è½½å¤±è´¥:', error);
    }
}

</script>
